<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="resources/css/main.css">
    <link rel="stylesheet" href="resources/css/bootstrap.min.css">
    <link rel="icon" href="resources/img/logo.png" type="image/png" />
    <title>Admin</title>
</head>

<body>

	<div th:include="~{header :: header}"></div>
	<div th:include="~{error-modal :: error-modal}"></div>
	
	<input type="hidden" id="active-modal-window" th:value="${activeWindow}"/>
	      
	<!-- All users table -->
    <div class="container">
    	<div class="row">
			<div class="col-9">
				<h4 class="text-primary">Все пользователи</h4>
			</div>
		</div>
        <div class="row">
            <div class="col-9">
	            <div class="table-wrapper-scroll-y my-custom-scrollbar">
	            	<table class="table table-hover table-striped table-bordered table-sm my-custom-scrollbar">
	            		<thead>
	    					<tr>
	      						<th scope="col">Имя пользователя</th>
	      						<th scope="col">Имя</th>
	      						<th scope="col">Фамилия</th>
	      						<th scope="col">Статус</th>
	    					</tr>
	  					</thead>
	  					<tbody>
	  						<div th:each="user : ${userList}">
	                			<tr onclick="select(this)">
	                				<td>                				
	    								<input type="hidden" th:value="${user.id}" />
	                					<a href="#" th:text="${user.name}">name</a>
	                				</td>
	                				<td>
	                					<a href="#" th:text="${user.firstName}">First name</a>
	                				</td>
	                				<td>
	                					<a href="#" th:text="${user.lastName}">Last name</a>
	                				</td>
	                				<td>
	                					<a href="#" th:text="${user.enabled} ? 'активен' : 'заблокирован'">Status</a>
	                				</td>
	                			</tr>
	  						</div>
	                	</tbody>
	                </table>
	            </div>
            </div>
        </div>
    </div>
    <hr/>
    
	<form id="edit-form" method="GET" th:action="@{courses/edit}">
          	<input type="hidden" id="selected-id" name="id">					
	</form>
	
    <div class="container">        		
		<div class="row">
			<div class="col-12 ">
				<a href="/university/users/new" class="btn btn-outline-primary">Регистрировать</a>
				<a href="javascript: editUser();" class="btn btn-outline-primary">Редактировать</a>
				<button class="btn btn-outline-primary" onclick="showDeleteModal()">Удалить</button>
			</div>
		</div>
    </div>
    <hr/>
    
<script src="resources/js/main.js"></script>
<script src="resources/js/jquery.js"></script>
<script src="resources/js/bootstrap.bundle.min.js"></script>
<script>
	function editUser() {
		
		let userId = getSelectedUserId();
		
		if (userId != null) {
			let url = '/university/users/' + userId;
			document.location.href = url;
		}
	}
	
	function getSelectedUserId() {
		return document.getElementsByClassName('selected')[0]
			.getElementsByTagName('input')[0].value;		
	}
</script>
</body>

</html>